# Документация bbd-back
 REST API для интернет магазина квартир
 
 v.1.1 от 16.05.2023

 Сайт проекта: app.kalinovne.ru

---
## Содержание:

1. Значения для фильтра
2. Просмотр объектов
3. Фильтрация
4. Заявки. Смотреть все заявки
5. Заявки. Добавить заявку
---
### Получение значений для фильтра
Получение минимальных и максимальных значений для цены и площади. А также получение всех возможных названий ЖК и вариантов количества комнат в квартирах.

Адрес для запроса:
```no-highlight
http://app.kalinovne.ru/itemsinfo
```
Пример ответа:
```no-highlight
{
    "priceMin": "1872000",
    "priceMax": "8610000",
    "squareMin": "38",
    "squareMax": "120",
    "complexNames":
        [
            "Генеральский",
            "Квантум",
            "Лесной",
            "Речной"
        ],
    "roomValues":
        [
            "1",
            "2",
            "3",
            "4",
            "5"
        ]
}
```
---
### Просмотр объектов
Все объекты
```no-highlight
http://app.kalinovne.ru/items
```
Объект с конкретным ID
```no-highlight
http://app.kalinovne.ru/items/5
```
Несколько объектов по конкретным ID 
(для отображения объектов из Избранного)
```no-highlight
http://app.kalinovne.ru/items?ids=1,3,5
```
#### Если объекты не найдены
Будет возвращен пустой массив:
```no-highlight
[]
```
Если был запрос на конкретный объект по id и такого объекта не существует, тогда будет возвращен пустой объект:
```no-highlight
{}
```
---
### Фильтрация
Пример запроса:
```no-highlight
http://app.kalinovne.ru/items?complex=Речной&rooms=2,3&sqmin=40&sqmax=90&pricemin=2325000&pricemax=4525000
```
Параметры по очереди:
```no-highlight
complex=Речной // Название комплекса
rooms=2,3 // Перечисление комнат
sqmin=40 // Минимальная площадь
sqmax=90 // Максимальная площадь
pricemin=2325000 // Минимальная цена
pricemax=4525000 // Максимальная цена
ids=1,3,5 // Показать только объекты с указанными ID
```
#### Значения параметров:
```no-highlight
complex:
 Генеральский
 Речной
 Лесной
 Квантум
```
* rooms: 1, 2, 3, 4, 5
* sqmin: от 38
* sqmax: до 120
* pricemin: от 1872000
* pricemax: до 8610000
#### Если объекты не существуют или не найдены
Будет возвращен пустой массив:
```no-highlight
[]
```
---
### Заявки. Смотреть все заявки
```no-highlight
http://app.kalinovne.ru/bids
```
#### Если заявки отсутствуют
Будет возвращен пустой массив.
```no-highlight
[]
```
---
### Заявки. Добавить заявку
Отправить POST запрос с JSON данными. Поля name и phone являются обязательными для заполнения.
```no-highlight
{
    "name": "Client Name",
    "phone": "+7951236547"
}
```
на адрес:
```no-highlight
http://app.kalinovne.ru/bidnew
```
#### Если заявка добавлена успешно
В ответ придет объект с следующим сообщением:
```no-highlight
{
    "message": "Bid Created"
}
```
#### Если заявка не добавлена
Если в заявке отсутствовали необходимые поля, то будет получено сообщение с текстом ошибки:
```no-highlight
{
    "message": "Bid Not Created",
    "errors": [
        "Поле \"Имя\" обязательно для заполнения!",
        "Поле \"Телефон\" обязательно для заполнения!"
    ]
}
```
Если поля заполнены, но добавление не произошло по иным причинам связанным с работой сервера:
```no-highlight
{
    "message": "Bid Not Created"
}
```
